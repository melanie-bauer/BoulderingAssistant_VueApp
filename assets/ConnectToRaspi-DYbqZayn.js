import{_ as L}from "./HomeButton-WpVNkstQ.js";import{_ as H,r as v,f as g,g as S,h as E,o as d,c as h,b,F,i as R,n as C,a as x}from "./index--FQ5Ellf.js";const W={id:"container"},X=["id","onMousedown","onTouchstart"],p=20,Y={__name:"Canvas",setup(T){const n=v(null),a=v(!1),s=v(null),l=g({x:0,y:0}),o=g({}),w=S(()=>{const e=["LH","RH","LF","RF"];return Object.fromEntries(Object.entries(o).filter(([t])=>e.includes(t)))});async function f(){try{const t=await(await fetch("http://localhost:3000/points")).json();Object.assign(o,t),y(o)}catch(e){console.error("Error fetching data:",e)}}function y(e){const t=n.value.getContext("2d");t.lineWidth=5,t&&(t.clearRect(0,0,n.value.width,n.value.height),t.beginPath(),t.moveTo(e.Head.x+25,e.Head.y),t.arc(e.Head.x,e.Head.y,30,0,Math.PI*2,!0),t.fillStyle="white",t.fill(),t.moveTo(e.Shoulders.x,e.Shoulders.y),t.lineTo(e.Hip.x,e.Hip.y),t.lineTo(e.LF.x,e.LF.y),t.moveTo(e.Hip.x,e.Hip.y),t.lineTo(e.RF.x,e.RF.y),t.moveTo(e.Shoulders.x,e.Shoulders.y),t.lineTo(e.LH.x,e.LH.y),t.moveTo(e.Shoulders.x,e.Shoulders.y),t.lineTo(e.RH.x,e.RH.y),t.moveTo(e.Shoulders.x,e.Shoulders.y),t.lineTo(e.Head.x,e.Head.y),t.strokeStyle="white",t.stroke())}function _(e, t){console.log("started dragging"),a.value=!0,s.value=t;const c=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,r=e.type.startsWith("touch")?e.touches[0].clientY:e.clientY;l.x=c-o[t].x,l.y=r-o[t].y,e.type==="mousedown"?(document.addEventListener("mousemove",i),document.addEventListener("mouseup",u)):e.type==="touchstart"&&(document.addEventListener("touchmove",i),document.addEventListener("touchend",u))}function i(e){if(console.log(`draging: ${a.value}`),!a.value)return;console.log(o[s.value].x+" "+o[s.value].y);const t=e.type.startsWith("touch")?e.touches[0].clientX:e.clientX,c=e.type.startsWith("touch")?e.touches[0].clientY:e.clientY;o[s.value].x=t-l.x,o[s.value].y=c-l.y,console.log(o[s.value].x+" "+o[s.value].y),y(o)}async function u(){a.value=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",u);try{(await fetch("http://localhost:3000/points",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok||console.error("Failed to update points")}catch(e){console.error("Error updating points:",e)}}return E(()=>{n.value=document.getElementById("canvas"),f(),setInterval(f,1e3),n.value.width=window.innerWidth,n.value.height=window.innerHeight}),(e, t)=>(d(),h("div",W,[b("canvas",{id:"canvas",ref_key:"canvas",ref:n},null,512),(d(!0),h(F,null,R(w.value,(c, r)=>(d(),h("div",{draggable:"true",key:r,id:r,class:"point",style:C({top:c.y-p/2+"px",left:c.x-p/2+"px"}),onMousedown: m=>_(m,r),onTouchstart: m=>_(m,r)},null,44,X))),128))]))}},j=H(Y,[["__scopeId","data-v-1b70b15b"]]),I={class:"container"},P={__name:"ConnectToRaspi",setup(T){return(n, a)=>(d(),h("div",I,[x(j),x(L,{onClick:a[0]||(a[0]=()=>{})})]))}},D=H(P,[["__scopeId","data-v-4effc19a"]]);export{D as default};
